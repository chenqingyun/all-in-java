# 线程属性

[TOC]

线程的属性包括线程的编号（ID）、名称（Name）、线程类别（Daemon）和优先级（Priority）等。

**Thread 类源码：**

```java
/* 线程的名称 */
private volatile String name;

/* 线程的优先级 */
private int            priority;
private Thread         threadQ;
private long           eetop;

/* Whether or not to single_step this thread. */
private boolean     single_step;

/* 线程是否为守护线程 */
private boolean     daemon = false;

/* JVM state */
private boolean     stillborn = false;

/* 将会被执行的 Runnable */
private Runnable target;

/* 线程组 */
private ThreadGroup group;

/* The context ClassLoader for this thread */
private ClassLoader contextClassLoader;

/* The inherited AccessControlContext of this thread */
private AccessControlContext inheritedAccessControlContext;

/* 第几个线程，给匿名线程自动编号 */
private static int threadInitNumber;
private static synchronized int nextThreadNum() {
    return threadInitNumber++;
}

/* ThreadLocal values pertaining to this thread. This map is maintained
* by the ThreadLocal class. */
ThreadLocal.ThreadLocalMap threadLocals = null;

/*
* InheritableThreadLocal values pertaining to this thread. This map is
* maintained by the InheritableThreadLocal class.
*/
ThreadLocal.ThreadLocalMap inheritableThreadLocals = null;

/* 该线程请求的堆栈大小，未指定大小默认是 0。一些虚拟机是忽略的 */
private long stackSize;

/*
     * JVM-private state that persists after native thread termination.
     */
private long nativeParkEventPointer;

/* 线程 ID */
private long tid;

/* 生成 thread ID */
private static long threadSeqNumber;

/* 标识线程的状态，默认初始化线程是未启动状态 */

private volatile int threadStatus = 0;

volatile Object parkBlocker;

/* 可中断的阻断*/
private volatile Interruptible blocker;

/* 阻断锁*/
private final Object blockerLock = new Object();

/* 线程最小优先级 */
public final static int MIN_PRIORITY = 1;

/* 线程默认优先级 */
public final static int NORM_PRIORITY = 5;

/* 线程最大优先级 */
public final static int MAX_PRIORITY = 10;
```



## 线程的编号

- 是只读的，用于标识不同的线程，不同的线程有不同编号。

- 编号的唯一性只在 Java 虚拟机的一次运行有效，重启 Java 虚拟机（如重启 Web 服务器）某些线程的编号可能与上一次线程的编号一样，因此该属性值不适用于做某种唯一标识，如数据库的唯一标识。



## 线程的名称

- 用于区分不同线程，默认值的格式为 “Thread-线程编号”。

- 通过 Thread 的 getName 和 setName 方法获取和设置线程名称。建议为每个线程设置有意义的名称，利于程序调试和问题定位。



## 守护线程和用户线程

按照线程是否会阻止 Java 虚拟机运行正常停止，可以将线程分为守护线程（Daemon Thread）和用户线程（User Thread，也称非守护线程）。

- 用户线程会阻止 Java 虚拟机的正常停止，只要有一个用户线程还在运行 Java 虚拟机就不会正常停止（除 Java 虚拟机被强制停止外 ），当 Java 虚拟机中所有的用户线程都结束运行了，Java 虚拟机才能正常停止。
- 守护线程不会影响 Java 虚拟机的正常停止，即应用程序中有守护线程还在运行也不影响 Java 虚拟机正常停止。守护线程通常用于执行重要性不高的任务，常用于为其他线程提供服务，如计时线程、监视其他线程的运行情况等。
- 父线程为守护线程，则子线程也为守护线程。

通过设置线程的 daemon 属性为 true 可以让该线程成为守护线程。

注意，该属性必须在线程启动之前设置，即 setDaemon 方法必须在 start 方法之前调用，否则 setDaemon 方法会抛出 java.lang.IllegalThreadStateException 异常。



## 线程优先级

- 该属性本质上是给线程调度器的提示，用于表示哪个线程能够优先得到运行。
- 有 1~10 的10个优先级，默认为5。
- 一般使用默认优先级，不恰当的设置优先级可能导致严重的问题（线程饥饿）。

