## Redis 单线程与高并发



### Redis 单线程模型

#### 如何理解 Redis 的单线程？

Redis 的单线程指一个线程同时处理多个客户端的连接请求，同一个时间点只有一个线程处理客户端发来的命令请求。



每个客户端发送过来的指令先放入各自的队列中，一个客户端的队列中的指令依据先进先出的顺序被 Redis 逐个执行，但是多个指令队列之间的执行是无法保证顺序的，但是 Redis 每次肯定只处理一个指令。

[Redis 单线程模型介绍](https://cloud.tencent.com/developer/article/1403767)

[Redis单线程架构](https://cloud.tencent.com/developer/article/1073147)



#### 为什么设计成单线程？

官方 FAQ 表示，因为 Redis 是基于内存的操作，CPU 不是 Redis 的瓶颈，Redis 的瓶颈最有可能是机器内存的大小或者网络带宽。既然单线程容易实现，而且 CPU 不会成为瓶颈，那就顺理成章地采用单线程的方案了。





#### 为什么能支撑高并发

- 完全基于内存，速度极快（10W+QPS）。
- Redis全程使用 hash 结构，读取速度快，还有一些特殊的数据结构，对数据存储进行了优化，如压缩表，对短数据进行压缩存储，再如，跳表，使用有序的数据结构加快读取的速度。
- 非阻塞I/O。采用「 I/O 多路复用技术 」 可以让单个线程高效的处理多个连接请求。
- 采用单线程，避免了不必要的上下文切换和竞争条件的消耗。



#### I/O 多路复用技术

多路-指的是多个 socket 连接，复用-指的是复用一个线程。

多路复用主要有三种技术：select，poll，epoll。epoll是最新的也是目前最好的多路复用技术。



[为什么说Redis是单线程的以及Redis为什么这么快！](https://blog.csdn.net/xlgen157387/article/details/79470556)

[Redis为什么是单线程，高并发快的3大原因详解](https://zhuanlan.zhihu.com/p/58038188)

[阿里大师带你解析： 为什么Redis单线程却能支撑高并发？](https://juejin.im/post/5ccaef8cf265da038932a357)
